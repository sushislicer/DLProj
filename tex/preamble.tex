%% This file contains a number of tweaks that are typically applied to the main document.
%% They are not enabled by default, but can be enabled by uncommenting the relevant lines.

% ------------------------------------------------------------
% Project-specific preamble (safe to include before hyperref)
% ------------------------------------------------------------

% Math
\usepackage{amsmath,amssymb,mathtools}
\usepackage{bm}

% Tables/figures
\usepackage{booktabs}
\usepackage{multirow}
\usepackage{graphicx}
\graphicspath{{../figures/}{figures/}}

% Utilities
\usepackage{xspace}
\usepackage{enumitem}
\setlist[itemize]{leftmargin=*,noitemsep,topsep=2pt}
\setlist[enumerate]{leftmargin=*,noitemsep,topsep=2pt}

% Code blocks (for long shell commands; supports line breaking)
\usepackage{listings}
\lstset{
  basicstyle=\ttfamily\footnotesize,
  breaklines=true,
  breakatwhitespace=true,
  columns=fullflexible,
  frame=single,
  framerule=0.2pt,
  xleftmargin=0.5em,
  xrightmargin=0.5em,
  aboveskip=0.75em,
  belowskip=0.75em
}

% Cross-references
% NOTE: cleveref must be loaded after hyperref; we load it in main.tex.

% Common math operators
\DeclareMathOperator*{\argmin}{arg\,min}
\DeclareMathOperator*{\argmax}{arg\,max}

% Notation shortcuts
\newcommand{\R}{\mathbb{R}}
\newcommand{\W}{\bm{W}}
\newcommand{\A}{\bm{A}}
\newcommand{\B}{\bm{B}}
\newcommand{\I}{\bm{I}}
\newcommand{\Q}{\mathcal{Q}}
\newcommand{\E}{\mathbb{E}}

% Project/method naming
% Use TeX-native double hyphens to avoid any \textendash package/dependency quirks.
\newcommand{\method}{PiSSA--SpinQuant--GaLore\xspace}
\newcommand{\qwen}{Qwen2.5\xspace}

%%
%% Inline annotations; for predefined colors, refer to "dvipsnames" in the xcolor package:
%% https://tinyurl.com/overleaf-colors
%%
\newcommand{\red}[1]{{\color{red}#1}}
\newcommand{\todo}[1]{{\color{red}#1}}
\newcommand{\TODO}[1]{\textbf{\color{red}[TODO: #1]}}
%%
%% disable for camera ready / submission by uncommenting these lines  
%%
% \renewcommand{\TODO}[1]{}
% \renewcommand{\todo}[1]{#1}

%%
%% work harder in optimizing text layout. Typically shrinks text by 1/6 of page, enable
%% it at the very end of the writing process, when you are just above the page limit
%%
\usepackage{microtype}

% Help TeX avoid overfull boxes by allowing slightly more stretch.
% This is a standard, review-safe mitigation for long tokens/URLs/equations.
\setlength{\emergencystretch}{1em}

%%
%% fine-tune paragraph spacing
%%
% \renewcommand{\paragraph}[1]{\vspace{.5em}\noindent\textbf{#1.}}

%%
%% globally adjusts space between figure and caption
%%
% \setlength{\abovecaptionskip}{.5em}


%%
%% Allows "the use of \paper to refer to the project name"
%% with automatic management of space at the end of the word
%%
% \usepackage{xspace}
% \newcommand{\paper}{ProjectName\xspace}

%%
%% Commonly used math definitions
%%
% \DeclareMathOperator*{\argmin}{arg\,min}
% \DeclareMathOperator*{\argmax}{arg\,max}

%%
%% Tigthen underline
%%
% \usepackage{soul}
% \setuldepth{foobar}
